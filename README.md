# Практика 5 Столяров Даниил Шикхарович 22T0318
## Тема: приложение для парикмахерской.
## Текст задания
Усовершенствовать приложение из предыдущей практики. 
<ul>
  <li>Добавить вкладку "Корзина". В карточке товара есть кнопка "добавить в корзину".</li>
  <li>Элемент корзины: количество +/-, удалить с помощью свайпа и кнопки.</li>
  <li>Общая сумма всех товаров внизу</li>
  <li>Добавить возможность редактирования профиля</li>
</ul>

## Порядок выполнения
### Шаг 1. Адаптируем проект для использования sqlite
<pre>flutter pub add sqflite path</pre>
В класс GlobalData я добавил 

<pre>Future<void> initDatabase() async {
    WidgetsFlutterBinding.ensureInitialized();
    appDatabase = await openDatabase(

    join(await getDatabasesPath(), 'app_database.db'),
    onCreate: (db, version) async {

      await db.execute(
        'CREATE TABLE shop_items(id INTEGER PRIMARY KEY, name TEXT, category TEXT, price_rubles INTEGER, image_href TEXT, description TEXT)',
      );
      await db.execute(
        'CREATE TABLE favourite_items(id INTEGER PRIMARY KEY, name TEXT, category TEXT, price_rubles INTEGER, image_href TEXT, description TEXT)',
      );
      await db.execute(
        'CREATE TABLE cart_items(id INTEGER PRIMARY KEY, shop_item_id INTEGER, service_time TIMESTAMP)'
      );
      await db.insert('shop_items', ShopItem(-1, "Боб", "Стрижка и укладка", 799, "https://i.imgur.com/pLhAUHv.jpeg", "Боб — это классическая и универсальная стрижка, которая подходит для любого типа волос и формы лица. Она может быть выполнена различной длины и формы, от короткого, доходящего до подбородка боба до длинного, доходящего до плеч боба. Боб идеально подходит для тех, кто хочет добавить объем и текстуру своим волосам, а также скрыть недостатки лица и подчеркнуть скулы.").toMap());
      await db.insert('shop_items', ShopItem(-1, "Цезарь", "Стрижка и укладка", 699, "https://i.imgur.com/G8eOfAE.jpeg", "Цезарь — это короткая мужская стрижка с ровной челкой и короткими, одинаковой длины волосами по бокам и сзади. Она идеально подходит для мужчин с прямыми или волнистыми волосами и квадратной или круглой формой лица. Стрижка Цезарь — это стильный и универсальный вариант, который легко укладывать и поддерживать.").toMap());
      await db.insert('shop_items', ShopItem(-1, "Гарсон", "Стрижка и укладка", 599, "https://i.imgur.com/Atfpw5S.jpeg", "Гарсон — это короткая, женственная стрижка, которая добавляет образу дерзости и стиля. Она характеризуется короткими, филированными волосами, часто с челкой или асимметрией. Гарсон идеально подходит для тех, кто хочет добавить объем и текстуру тонким волосам, а также скрыть недостатки лица и подчеркнуть скулы.").toMap());
      await db.insert('shop_items', ShopItem(-1, "Полубокс", "Стрижка и укладка", 499, "https://i.imgur.com/rpKjovf.jpeg", "Полубокс — это короткая, практичная и универсальная мужская стрижка, которая подходит для любого типа волос и формы лица. Она характеризуется короткими волосами на висках и затылке, переходящими в более длинные волосы на макушке. Полубокс — это стильный и неприхотливый вариант, который легко укладывать и поддерживать.").toMap());
      await db.insert('shop_items', ShopItem(-1, "Шапочка", "Стрижка и укладка", 599, "https://i.imgur.com/MiLOdAO.jpeg", "Шапочка — это женственная и элегантная стрижка, которая подходит для любого типа волос и формы лица. Она характеризуется короткими, округлыми волосами, которые плавно обрамляют лицо, создавая эффект шапочки. Шапочка — это универсальный вариант, который легко укладывать и поддерживать, придавая образу утонченность и шарм.").toMap());
      await db.insert('shop_items', ShopItem(-1, "Маллет", "Стрижка и укладка", 699, "https://i.imgur.com/oAlIgc2.jpeg", "Маллет — это дерзкая и экстравагантная стрижка, которая характеризуется короткими волосами на макушке и длинными волосами на затылке. Маллет — это стильный и необычный вариант, который подходит для тех, кто хочет выделиться и подчеркнуть свой индивидуальный стиль. Она требует особого ухода и укладки, придавая образу неповторимость и притягательность.").toMap());
      await db.insert('shop_items', ShopItem(-1, "Милитари", "Стрижка и укладка", 799, "https://i.imgur.com/RHjZ63I.jpeg", "Милитари — это мужественная и практичная стрижка, которая характеризуется короткими волосами по всей голове. Милитари — это универсальный и неприхотливый вариант, который подходит для любого типа волос и формы лица. Она не требует сложной укладки и идеально подходит для тех, кто ценит удобство и аккуратный внешний вид.").toMap());
      await db.insert('shop_items', ShopItem(-1, "Пикси", "Стрижка и укладка", 999, "https://i.imgur.com/01Z9Sga.jpeg", "Пикси -  это дерзкая и стильная стрижка, которая характеризуется короткими волосами на висках и затылке, переходящими в более длинные волосы на макушке. Пикси — это женственный и многогранный вариант, который подходит для любого типа волос и формы лица. Она позволяет создавать различные укладки, от гладких и элегантных до текстурных и небрежных.").toMap());
      await db.insert('shop_items', ShopItem(-1, "Короткое Каре", "Стрижка и укладка", 899, "https://i.imgur.com/HroeZo2.jpeg", "Короткое Каре — это элегантная и стильная стрижка, которая характеризуется прямыми волосами, подстриженными до уровня подбородка или чуть выше. Короткое каре — это универсальный и практичный вариант, который подходит для любого типа волос и формы лица. Оно легко укладывается и позволяет создавать различные образы, от классических и сдержанных до современных и авангардных.").toMap());
      await db.insert('shop_items', ShopItem(-1, "Звезда", "Стрижка и укладка", 1199, "https://i.imgur.com/dOnl5Vz.jpeg", "Звезда — это смелая и дерзкая стрижка, которая характеризуется выбритыми висками и затылком в форме звезды. Звезда — это авангардный и экстравагантный вариант, который подходит для тех, кто не боится выделяться из толпы. Она требует особого ухода и укладки, но придает образу неповторимый и притягательный вид.").toMap());
      await db.insert('shop_items', ShopItem(-1, "Теннис", "Стрижка и укладка", 599, "https://i.imgur.com/1uNHwbK.jpeg", "Теннис — это спортивная и практичная стрижка, которая характеризуется короткими волосами по всей голове, подстриженными машинкой. Теннис — это универсальный и неприхотливый вариант, который подходит для любого типа волос и формы лица. Она не требует сложной укладки и идеально подходит для тех, кто ценит удобство и аккуратный внешний вид.").toMap());
    },
    version: 1
  );    
}</pre>
открывает соединение с базой данных,
а также

<pre>Future<void> fetchAllItems() async {
    final shopItemMap = await (appDatabase?.query('shop_items'));
    shopItems = shopItemMap!.map((map) => ShopItem.fromMap(map)).toList();

    final favouriteItemMap = await (appDatabase?.query('favourite_items'));
    favouriteItems = favouriteItemMap!.map((map) => ShopItem.fromMap(map)).toList();

    final cartItemMap = await (appDatabase?.query('cart_items'));
    cartItems = await Future.wait(cartItemMap!.map((map) async {
    return await CartItem.fromMap(map);
     }));
  }
}</pre>
с помощью которого будет подгружаться вся информация из БД, например при запуске приложения.

<p>При добавлении или изменении данных, кроме списков представления (shopItems, favouriteItems, cartItems) дополнительно также обновляются данные в БД</p>

### Шаг 2.
Добавим вкладку "Запись" (по аналогии с корзиной).
Рядом с реальной ценой пишется фейковая зачёркнутая цена, чтобы пользователь думал, что он покупает со скидкой.
Рядом с каждым элементом есть кнопки + и -, позволяющие отредактировать количество стрижек.
Внизу есть общая сумма и кнопка оплатить.

![изображение](https://github.com/user-attachments/assets/f68879e4-883f-4d0d-a271-120feb78a257)

По свайпу влево доступна кнопка удаления.

![изображение](https://github.com/user-attachments/assets/a9b43503-9ea7-44a9-a0f8-b5be98096246)

С подтверждением

![изображение](https://github.com/user-attachments/assets/dc14048f-9288-45e2-86bb-e09b66dbc496)


### Шаг 3.

Добавим возможность обновлять пользовательские данные.

![изображение](https://github.com/user-attachments/assets/6a9c0b3a-9b77-4254-9d26-b6b6039d467e)

![изображение](https://github.com/user-attachments/assets/33cf68c5-a3dc-46d4-b918-d76f2b4e20e0)

# Результат (.gif)

![изображение](https://github.com/DaniilStolyarov/pks_sem5_p6/blob/481fd3087b7f856191fba3837cfdc29b4eae3110/preview.gif)
